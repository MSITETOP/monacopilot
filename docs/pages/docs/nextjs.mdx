---
title: Next.js
---

import { Tabs, Callout, Card } from 'nextra/components';
import { Link1Icon } from '@radix-ui/react-icons';

# Next.js

This guide walks you through integrating AI auto-completion into your Next.js project.

Start by obtaining an API key from the [Groq console](https://console.groq.com/keys).

### Setting Up the API Key

Once you have your API key, define it as an environment variable in your project:

```bash filename=".env.local"
GROQ_API_KEY=your-api-key
```

### API Handler

Set up an API handler to manage auto-completion requests.

<Tabs items={["App Router", "Pages Router"]}>
  <Tabs.Tab title="App Router">
    ```javascript filename="app/api/copilot/route.ts"
    import { Copilot } from 'monacopilot';

    const copilot = new Copilot(process.env.GROQ_API_KEY);

    export async function POST(req: Request) {
      const body = await req.json();
      const completion = await copilot.complete(body);

      return Response.json(completion, { status: 200 });
    }
    ```
  </Tabs.Tab>
  <Tabs.Tab title="Pages Router">
    ```javascript filename="pages/api/copilot.ts"
    import { NextApiRequest, NextApiResponse } from 'next';
    import { Copilot } from 'monacopilot';

    const copilot = new Copilot(process.env.GROQ_API_KEY);

    export default async function handler(req: NextApiRequest, res: NextApiResponse) {
      const completion = await copilot.complete(req.body);

      res.status(200).json(completion);
    }
    ```
  </Tabs.Tab>
</Tabs>

### Integrating Copilot with the Editor

Install a wrapper for the Monaco Editor. In this example, we'll use `@monaco-editor/react`.

<Tabs items={["Method 1", "Method 2"]}>
  <Tabs.Tab title="Method 1">
```tsx
'use client';

import {useEffect, useState} from 'react';

import MonacoEditor from '@monaco-editor/react';
import {
  registerCopilot,
  type Monaco,
  type StandaloneCodeEditor,
} from 'monacopilot';

const LANGUAGE = 'javascript';

export default function JavaScriptEditor() {
  const [editorInstance, setEditorInstance] = useState<StandaloneCodeEditor | null>(null);
  const [monacoInstance, setMonacoInstance] = useState<Monaco | null>(null);

  useEffect(() => {
    if (!monacoInstance || !editorInstance) return;

    const copilot = registerCopilot(
      monacoInstance,
      editorInstance,
      {
        endpoint: '/api/copilot',
        language: LANGUAGE,
      },
    );

    return () => {
      copilot.deregister();
    };
  }, [monacoInstance, editorInstance]);

  return (
    <MonacoEditor
      language={LANGUAGE}
      onMount={(editor, monaco) => {
        setEditorInstance(editor);
        setMonacoInstance(monaco);
      }}
    />
  );
}
```
  </Tabs.Tab>
  <Tabs.Tab title="Method 2">
```tsx
'use client';

import {useCallback, useEffect, useRef} from 'react';

import MonacoEditor from '@monaco-editor/react';
import {
  registerCopilot,
  type CopilotRegistration,
  type Monaco,
  type StandaloneCodeEditor,
} from 'monacopilot';

const LANGUAGE = 'javascript';
const COPILOT_ENDPOINT = '/api/copilot';

export default function JavaScriptEditor() {
  const copilotRegistration = useRef<CopilotRegistration | null>(null);

  const onEditorMount = useCallback(
    (editor: StandaloneCodeEditor, monaco: Monaco) => {
      copilotRegistration.current = registerCopilot(monaco, editor, {
        endpoint: COPILOT_ENDPOINT,
        language: LANGUAGE,
      });
    },
    [],
  );

  useEffect(() => {
    return () => {
      copilotRegistration.current?.deregister();
    };
  }, []);

  return <MonacoEditor language={LANGUAGE} onMount={onEditorMount} />;
}
```
  </Tabs.Tab>
</Tabs>

Provide the `endpoint` with the path to the API handler.

<Callout type="info">
  The `language` in `registerCopilot` is required to enable auto-completion for the specified language.
</Callout>

### Additional Options

For more advanced customization, refer to the [Copilot Options](/docs/copilot-options) guide.

---

You have now successfully configured AI auto-completion in your Next.js project. Start coding in the editor to experience the auto-completion functionality.